export const metadata = {
  title: 'Schemes â€” Algebraic Geometry â€” Math Notes',
}

import { Breadcrumbs } from '@/components/layout/Breadcrumbs'
import { Tag } from '@/components/ui/Tag'
import { StatusBadge } from '@/components/ui/StatusBadge'

<Breadcrumbs items={[
  { label: "ëŒ€ìˆ˜ê¸°í•˜í•™", href: "/algebraic-geometry" },
  { label: "2. ìŠ¤í‚´", href: "/algebraic-geometry/ch02-schemes" },
  { label: "Concept â€” Scheme" },
]} />

<div className="mb-6">
  <div className="flex items-center gap-3 mb-3">
    <Tag type="concept" />
    <StatusBadge status="complete" />
  </div>
</div>

# Schemes

A **scheme** is a space that locally looks like the spectrum of a ring. Just as a manifold is built by gluing open subsets of $\mathbb{R}^n$, a scheme is built by gluing affine schemes $\operatorname{Spec} A$. This definition, due to Grothendieck, unifies algebraic geometry over arbitrary base rings and allows nilpotent elements, non-closed-field points, and arithmetic geometry.

---

## From affine schemes to general schemes

<Definition title="Scheme" number="2.10">
A **scheme** is a locally ringed space $(X, \mathcal{O}_X)$ that is **locally affine**: every point $x \in X$ has an open neighborhood $U$ such that $(U, \mathcal{O}_X|_U)$ is isomorphic (as a locally ringed space) to $\operatorname{Spec} A$ for some ring $A$.

An **affine scheme** is one of the form $\operatorname{Spec} A$. A general scheme is obtained by **gluing** affine schemes along open subsets.
</Definition>

<Example id="affine-line" title="The affine line ð”¸Â¹">
$\mathbb{A}^1_k = \operatorname{Spec} k[x]$ is affine. For $k = \bar{k}$, the closed points correspond to elements $a \in k$ (via the maximal ideal $(x - a)$), plus the generic point $(0)$.

Over $\mathbb{Z}$: $\mathbb{A}^1_\mathbb{Z} = \operatorname{Spec} \mathbb{Z}[x]$. This is a $2$-dimensional scheme: the "arithmetic surface." Its points include:
- Closed points $(p, f(x))$ where $p$ is prime and $f$ is irreducible mod $p$ â€” points of $\mathbb{A}^1_{\mathbb{F}_p}$.
- Generic points of "horizontal curves" $(g(x))$ where $g \in \mathbb{Z}[x]$ is irreducible.
- Generic points of "vertical fibers" $(p)$.
- The generic point $(0)$.
</Example>

<Example id="projective-line" title="The projective line â„™Â¹">
$\mathbb{P}^1_k$ is the simplest non-affine scheme. It is obtained by gluing two copies of $\mathbb{A}^1$:

$$U_0 = \operatorname{Spec} k[t] \quad \text{and} \quad U_1 = \operatorname{Spec} k[s]$$

along $D(t) \cong D(s)$ via $s = 1/t$. Concretely:
- $U_0 \cap U_1 = \operatorname{Spec} k[t, 1/t]$,
- the gluing isomorphism is $k[t, 1/t] \cong k[s, 1/s]$ via $t \leftrightarrow 1/s$.

$\mathbb{P}^1$ is **not affine**: $\mathcal{O}(\mathbb{P}^1) = k$ (global sections are constant), but $\mathbb{P}^1$ is not a point. This shows that the functor $\Gamma : \mathbf{Sch} \to \mathbf{CRing}^{\mathrm{op}}$ is **not** an equivalence on non-affine schemes.
</Example>

<Example id="projective-space" title="Projective n-space â„™â¿">
$\mathbb{P}^n_k = \operatorname{Proj} k[x_0, \ldots, x_n]$ is covered by $n+1$ affine charts:

$$U_i = \operatorname{Spec} k\left[\frac{x_0}{x_i}, \ldots, \widehat{\frac{x_i}{x_i}}, \ldots, \frac{x_n}{x_i}\right] \cong \mathbb{A}^n_k, \quad i = 0, \ldots, n.$$

Key properties:
- $\mathcal{O}(\mathbb{P}^n) = k$ (only constant global functions).
- $\dim \mathbb{P}^n = n$.
- $\mathbb{P}^n$ is **proper** over $k$ (the algebraic analogue of compact).
- $\operatorname{Pic}(\mathbb{P}^n) = \mathbb{Z}$, generated by $\mathcal{O}(1)$.
</Example>

---

## Proj construction

<Definition title="Proj" number="2.11">
Let $S = \bigoplus_{d \geq 0} S_d$ be a graded ring. The **Proj construction** defines:

$$\operatorname{Proj} S = \{\mathfrak{p} \in \operatorname{Spec} S \mid \mathfrak{p} \text{ is homogeneous and } \mathfrak{p} \not\supseteq S_+\}$$

where $S_+ = \bigoplus_{d > 0} S_d$ is the **irrelevant ideal**. The topology has closed sets $V_+(I) = \{\mathfrak{p} \in \operatorname{Proj} S \mid \mathfrak{p} \supseteq I\}$ for homogeneous ideals $I$.

For $f \in S_d$ ($d > 0$), the distinguished open $D_+(f) = \operatorname{Spec} S_{(f)}$ is affine, where $S_{(f)} = (S_f)_0$ is the degree-$0$ part of the localization.
</Definition>

<Example id="proj-polynomial" title="Proj of a polynomial ring">
$\operatorname{Proj} k[x_0, x_1] = \mathbb{P}^1_k$. The two standard opens:
- $D_+(x_0) = \operatorname{Spec} k[x_1/x_0] = \operatorname{Spec} k[t] = \mathbb{A}^1$.
- $D_+(x_1) = \operatorname{Spec} k[x_0/x_1] = \operatorname{Spec} k[s] = \mathbb{A}^1$.

More generally, $\operatorname{Proj} k[x_0, \ldots, x_n] = \mathbb{P}^n_k$.
</Example>

<Example id="proj-hypersurface" title="Projective hypersurfaces via Proj">
A projective variety $V(F) \subseteq \mathbb{P}^n$ for homogeneous $F$ of degree $d$ is:

$$V(F) = \operatorname{Proj} k[x_0, \ldots, x_n]/(F).$$

For example, the **elliptic curve** $E = V(Y^2Z - X^3 + XZ^2) \subseteq \mathbb{P}^2$ is:

$$E = \operatorname{Proj} k[X, Y, Z]/(Y^2Z - X^3 + XZ^2).$$

In the affine chart $Z \neq 0$: $\operatorname{Spec} k[x,y]/(y^2 - x^3 + x)$, where $x = X/Z$, $y = Y/Z$.
</Example>

<Example id="proj-veronese" title="Veronese subrings and Proj">
The $d$-th **Veronese subring** of $S = k[x_0, \ldots, x_n]$ is $S^{(d)} = \bigoplus_k S_{kd}$. Then $\operatorname{Proj} S^{(d)} \cong \operatorname{Proj} S = \mathbb{P}^n$ (same scheme, different embedding). This is the scheme-theoretic version of the Veronese embedding.
</Example>

<Example id="proj-blowup" title="Blowup as Proj">
The **blowup** of $\mathbb{A}^2$ at the origin is:

$$\operatorname{Bl}_0 \mathbb{A}^2 = \operatorname{Proj} k[x,y][s,t]/(xt - ys) \subseteq \mathbb{A}^2 \times \mathbb{P}^1$$

where $[s:t]$ are the homogeneous coordinates on $\mathbb{P}^1$. This is covered by two affine charts:
- $s \neq 0$: $\operatorname{Spec} k[x, t/s] = \operatorname{Spec} k[x, u]$ where $y = xu$ â€” the chart where $u = y/x$.
- $t \neq 0$: $\operatorname{Spec} k[y, s/t] = \operatorname{Spec} k[y, v]$ where $x = yv$ â€” the chart where $v = x/y$.

The **exceptional divisor** $E \cong \mathbb{P}^1$ is the preimage of the origin.
</Example>

---

## Properties of schemes

<Definition title="Scheme properties" number="2.12">
A scheme $X$ is:

- **Reduced** if $\mathcal{O}_{X,x}$ has no nilpotents for all $x$ (equivalently, $\mathcal{O}_X(U)$ is reduced for all $U$).
- **Integral** (= reduced + irreducible) if $\mathcal{O}_X(U)$ is a domain for all nonempty affine $U$.
- **Noetherian** if it has a finite cover by spectra of Noetherian rings.
- **Locally Noetherian** if every point has a Noetherian open neighborhood.
- **Connected** if the underlying topological space is connected.
- **Irreducible** if the underlying space is irreducible (every open set is dense).
</Definition>

<Example id="non-reduced-scheme" title="Non-reduced schemes">
- $\operatorname{Spec} k[x]/(x^2)$: the **double point**. One point, but $\mathcal{O} = k[\varepsilon]$ with $\varepsilon^2 = 0$.
- $\operatorname{Spec} k[x,y]/(x^2, xy)$: a "fuzzy point" at the origin, non-reduced in the $x$-direction.
- The **scheme-theoretic intersection** $V(y) \cap V(y - x^2) = \operatorname{Spec} k[x,y]/(y, y-x^2) = \operatorname{Spec} k[x]/(x^2)$: a double point recording the tangency.

Non-reduced schemes arise naturally from:
- Intersections with multiplicity.
- Fibers of morphisms at critical values.
- Deformation theory (flat limits can acquire nilpotents).
</Example>

<Example id="non-connected" title="Non-connected scheme">
$\operatorname{Spec}(k \times k) = \operatorname{Spec} k \sqcup \operatorname{Spec} k$: two disjoint points.

$\operatorname{Spec} k[x]/(x^2 - 1) = \operatorname{Spec} k[x]/((x-1)(x+1)) \cong \operatorname{Spec}(k \times k)$: two points $x = 1$ and $x = -1$. But over $\mathbb{F}_2$: $x^2 - 1 = (x-1)^2$, so $\operatorname{Spec} \mathbb{F}_2[x]/(x-1)^2$ is a single (double) point â€” **connected** but non-reduced!
</Example>

<Example id="non-noetherian" title="Non-Noetherian scheme">
$\operatorname{Spec} k[x_1, x_2, x_3, \ldots]$ (polynomial ring in infinitely many variables) is an affine scheme that is **not Noetherian**: the chain of ideals $(x_1) \subset (x_1, x_2) \subset \cdots$ does not stabilize. In practice, most schemes in algebraic geometry are locally Noetherian.
</Example>

---

## Subschemes

<Definition title="Open and closed subschemes" number="2.13">
An **open subscheme** of $(X, \mathcal{O}_X)$ is $(U, \mathcal{O}_X|_U)$ for an open $U \subseteq X$.

A **closed subscheme** is determined by a quasi-coherent sheaf of ideals $\mathcal{I} \subseteq \mathcal{O}_X$. The underlying space is $\operatorname{Supp}(\mathcal{O}_X/\mathcal{I})$ and the structure sheaf is $\mathcal{O}_X/\mathcal{I}$.

For an affine scheme $\operatorname{Spec} A$:
- Open subschemes: $D(f) = \operatorname{Spec} A_f$ and unions thereof.
- Closed subschemes: $V(I) = \operatorname{Spec} A/I$ for ideals $I \subseteq A$.
</Definition>

<Example id="subscheme-multiplicity" title="Closed subschemes with the same support">
The following are all closed subschemes of $\mathbb{A}^1 = \operatorname{Spec} k[x]$ supported at the origin:

| Subscheme | Ideal | Ring | "Thickness" |
|---|---|---|---|
| $\operatorname{Spec} k$ | $(x)$ | $k$ | reduced point |
| $\operatorname{Spec} k[x]/(x^2)$ | $(x^2)$ | $k[\varepsilon]$ | double point |
| $\operatorname{Spec} k[x]/(x^3)$ | $(x^3)$ | $k[x]/(x^3)$ | triple point |
| $\operatorname{Spec} k[x]/(x^n)$ | $(x^n)$ | $k[x]/(x^n)$ | $n$-fold point |

As $n \to \infty$, the limit is $\operatorname{Spec} k[[x]]$, the **formal neighborhood** of the origin.
</Example>

<Example id="scheme-theoretic-image" title="Scheme-theoretic intersection vs. set-theoretic">
In $\mathbb{A}^2$, the curves $y = x^2$ and $y = 0$:

- **Set-theoretic intersection**: the origin $\{(0,0)\}$.
- **Scheme-theoretic intersection**: $\operatorname{Spec} k[x,y]/(y, y-x^2) = \operatorname{Spec} k[x]/(x^2)$ â€” a double point.

The curves $y = x$ and $y = 0$:
- **Scheme-theoretic intersection**: $\operatorname{Spec} k[x,y]/(y, y-x) = \operatorname{Spec} k[x]/(x) = \operatorname{Spec} k$ â€” a simple point.

Scheme-theoretic intersection detects tangency. This is the correct notion for BÃ©zout's theorem.
</Example>

---

## Schemes over a base

<Definition title="S-scheme" number="2.14">
A **scheme over $S$** (or **$S$-scheme**) is a scheme $X$ equipped with a morphism $X \to S$ (the **structure morphism**). The category of $S$-schemes is the slice category $\mathbf{Sch}/S$.

Most commonly:
- $S = \operatorname{Spec} k$: schemes over a field (**$k$-schemes**). All of classical algebraic geometry lives here.
- $S = \operatorname{Spec} \mathbb{Z}$: all schemes are $\mathbb{Z}$-schemes (since $\mathbb{Z}$ is initial in $\mathbf{CRing}$).
- $S = \operatorname{Spec} R$ for a ring of integers $R$: **arithmetic geometry**.
</Definition>

<Example id="scheme-over-Z" title="Schemes over Spec â„¤ â€” arithmetic families">
The scheme $E = \operatorname{Proj} \mathbb{Z}[X,Y,Z]/(Y^2Z - X^3 + XZ^2)$ is an elliptic curve over $\operatorname{Spec} \mathbb{Z}$. Its fibers:

- **Generic fiber** $E_\mathbb{Q}$: the elliptic curve $y^2 = x^3 - x$ over $\mathbb{Q}$.
- **Fiber at $(p)$**: $E_{\mathbb{F}_p} = E \times_{\operatorname{Spec}\mathbb{Z}} \operatorname{Spec} \mathbb{F}_p$ â€” the reduction mod $p$.

The number of $\mathbb{F}_p$-points $\#E(\mathbb{F}_p) = p + 1 - a_p$ where $|a_p| \leq 2\sqrt{p}$ (Hasse bound). The sequence $\{a_p\}$ encodes the **$L$-function** of $E$, connecting geometry to number theory (Birchâ€“Swinnerton-Dyer, modularity theorem, ...).
</Example>

<Example id="base-change" title="Base change / extension of scalars">
For a $k$-scheme $X$ and a field extension $K/k$, the **base change** is:

$$X_K = X \times_{\operatorname{Spec} k} \operatorname{Spec} K.$$

For $X = V(x^2 + y^2 + 1) \subseteq \mathbb{A}^2_\mathbb{R}$:
- Over $\mathbb{R}$: $X(\mathbb{R}) = \emptyset$ (no real points).
- Over $\mathbb{C}$: $X_\mathbb{C} = V(x^2 + y^2 + 1) \subseteq \mathbb{A}^2_\mathbb{C}$ is a smooth affine curve with many points.

The scheme $X$ itself doesn't change â€” we just see more points after base change.
</Example>

---

## Important classes of schemes

<Remark title="Taxonomy of schemes">
<div className="overflow-x-auto my-4">
<table className="min-w-full text-sm border border-gray-200">
<thead>
<tr className="bg-gray-50">
<th className="border border-gray-200 px-3 py-2 text-left">Class</th>
<th className="border border-gray-200 px-3 py-2 text-left">Definition</th>
<th className="border border-gray-200 px-3 py-2 text-left">Example</th>
</tr>
</thead>
<tbody>
<tr><td className="border border-gray-200 px-3 py-2">Affine</td><td className="border border-gray-200 px-3 py-2">$\operatorname{Spec} A$</td><td className="border border-gray-200 px-3 py-2">$\mathbb{A}^n$, $\operatorname{Spec} \mathbb{Z}$</td></tr>
<tr><td className="border border-gray-200 px-3 py-2">Projective</td><td className="border border-gray-200 px-3 py-2">Closed in $\mathbb{P}^n_S$</td><td className="border border-gray-200 px-3 py-2">$\mathbb{P}^n$, elliptic curves, Grassmannians</td></tr>
<tr><td className="border border-gray-200 px-3 py-2">Quasi-projective</td><td className="border border-gray-200 px-3 py-2">Open in projective</td><td className="border border-gray-200 px-3 py-2">$\mathbb{A}^n$, $\mathbb{P}^n \setminus V(f)$</td></tr>
<tr><td className="border border-gray-200 px-3 py-2">Proper</td><td className="border border-gray-200 px-3 py-2">Separated, finite type, universally closed</td><td className="border border-gray-200 px-3 py-2">$\mathbb{P}^n$, complete varieties</td></tr>
<tr><td className="border border-gray-200 px-3 py-2">Smooth / Regular</td><td className="border border-gray-200 px-3 py-2">All local rings regular</td><td className="border border-gray-200 px-3 py-2">$\mathbb{A}^n$, $\mathbb{P}^n$, smooth curves</td></tr>
<tr><td className="border border-gray-200 px-3 py-2">Normal</td><td className="border border-gray-200 px-3 py-2">All local rings integrally closed</td><td className="border border-gray-200 px-3 py-2">Smooth schemes, $\operatorname{Spec} \mathbb{Z}$</td></tr>
<tr><td className="border border-gray-200 px-3 py-2">Cohenâ€“Macaulay</td><td className="border border-gray-200 px-3 py-2">All local rings CM</td><td className="border border-gray-200 px-3 py-2">Normal + equidimensional</td></tr>
<tr><td className="border border-gray-200 px-3 py-2">Gorenstein</td><td className="border border-gray-200 px-3 py-2">CM + canonical module free</td><td className="border border-gray-200 px-3 py-2">Complete intersections</td></tr>
</tbody>
</table>
</div>

The hierarchy: **Smooth $\Rightarrow$ Normal $\Rightarrow$ Cohenâ€“Macaulay $\Rightarrow$ Gorenstein** (for local rings). All implications are strict.
</Remark>

<Example id="group-scheme" title="Group schemes">
A **group scheme** over $S$ is a scheme $G \to S$ with morphisms $\mu : G \times_S G \to G$ (multiplication), $e : S \to G$ (identity), $\iota : G \to G$ (inverse) satisfying the group axioms.

Examples:
- $\mathbb{G}_m = \operatorname{Spec} \mathbb{Z}[t, t^{-1}]$: the **multiplicative group**. $\mathbb{G}_m(R) = R^*$ for any ring $R$.
- $\mathbb{G}_a = \operatorname{Spec} \mathbb{Z}[t]$: the **additive group**. $\mathbb{G}_a(R) = (R, +)$.
- $GL_n = \operatorname{Spec} \mathbb{Z}[x_{ij}, 1/\det]$: the **general linear group**. $GL_n(R) = GL_n(R)$.
- $\mu_n = \operatorname{Spec} \mathbb{Z}[t]/(t^n - 1)$: the **$n$-th roots of unity**. Over a field of char $p \mid n$, this is **non-reduced** (e.g., $\mu_p = \operatorname{Spec} \mathbb{F}_p[t]/(t-1)^p$).
- Elliptic curves with their group law.
</Example>

<Example id="arithmetic-surface" title="Arithmetic surfaces">
$\operatorname{Spec} \mathbb{Z}[x]$ is a $2$-dimensional scheme, an "arithmetic surface." Its closed points correspond to pairs $(p, \alpha)$ where $p$ is prime and $\alpha \in \overline{\mathbb{F}_p}$ (up to Galois conjugacy).

The scheme $\operatorname{Spec} \mathbb{Z}[i] = \operatorname{Spec} \mathbb{Z}[x]/(x^2 + 1)$ is a closed subscheme: the "arithmetic curve" of the Gaussian integers. Its points:
- $(1 + i)$ above $p = 2$ (ramified: $2 = -i(1+i)^2$).
- $(a + bi)$ and $(a - bi)$ above $p \equiv 1 \pmod{4}$ (split).
- $(p)$ above $p \equiv 3 \pmod{4}$ (inert).

This decomposition pattern is governed by quadratic reciprocity!
</Example>

---

## Why schemes?

<Remark title="Advantages of scheme theory">
Grothendieck's scheme theory extends classical algebraic geometry in essential ways:

1. **Arbitrary base rings**: We can do geometry over $\mathbb{Z}$, $\mathbb{F}_p$, $p$-adic integers $\mathbb{Z}_p$, or any ring. This unifies algebraic geometry and number theory.

2. **Nilpotents**: Scheme-theoretic intersections, fibers, and limits naturally produce nilpotent structure. Ignoring it loses information (intersection multiplicities, infinitesimal deformations).

3. **Generic points**: The generic point of an irreducible scheme captures "general behavior." Properties at the generic point extend to a dense open set.

4. **Relative geometry**: Schemes over a base $S$ allow families, deformations, moduli problems. The fiber product $X \times_S Y$ is the correct notion of "product relative to $S$."

5. **Representability**: Many moduli problems are representable by schemes (Hilbert schemes, Picard schemes, ...) or by algebraic stacks. This gives a rigorous foundation for "spaces of geometric objects."

As Mumford wrote: "The à¸„à¸³à¸•à¸­à¸što the à¸„à¸³à¸–à¸²à¸¡ 'what is algebraic geometry?' is: it is the study of schemes."
</Remark>
